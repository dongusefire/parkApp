<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>选择车位所在地</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../css/chooseParkSpace.css" />
		<script src="../js/vue.min.js"></script>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav header-bar">
			<a class="mui-pull-left mui-action-back" id="hideView"><span class="mui-icon mui-icon-arrowleft" style="font-size: 35px; padding-top: 0px;color:#292929;"></span></a>
		    <h1 class="mui-title">选择车位所在地</h1>
		</header>
		<div class="mui-content">
		    <div class="list-box">
		    	<div class="parking" v-for="item in items">
		    		<!--title-->
		    		<div class="title">
		    			<span class="pName">{{item.parking_lot_name}}</span>
		    			<div class="priceContent mui-pull-right"><span class="price">{{item.price}}元</span><span class="unit">/小时</span></div>
		    		</div>
		    		<!--address-->
		    		<p class="address">
		    			<img src="../img/dwt.png">
		    			{{item.parking_lot_address}}
		    		</p>
		    		<p class="num">车位：<span class="free">{{item.free_number}}</span><span class="all">/{{item.number}}</span></p>
		    	</div>
		    </div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/app.js"></script>
		<script type="text/javascript">
			mui.init();
			var token;
			var vm = new Vue({
				el:'.mui-content',
				data:{
					items:[]
				},
				methods:{
					load:function(){
						var that = this;
						mui.ajax(AJAX_PATH+'/parkinglot/search?token='+token,{
							data:{},
							dataType:'json',
							type:"post",
							success:function(res){
								console.log(JSON.stringify(res.data));
								that.items = res.data.list;
							}
						})
					}
				}
			})
			mui.plusReady(function(){
				token = plus.storage.getItem('token');
				vm.load();
			})
		</script>
	</body>

</html>